<script>
// Theme sync — matches the main site's dark mode behavior
(function() {
  var key = 'ie-theme';
  var theme = localStorage.getItem(key);

  function applyTheme(t) {
    document.documentElement.setAttribute('data-bs-theme', t === 'dark' ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', t || 'light');
    var toggleBtn = document.getElementById('site-theme-toggle');
    if (toggleBtn) {
      toggleBtn.textContent = t === 'dark' ? '☀' : '☽';
    }
  }

  // Apply saved theme immediately
  if (theme) applyTheme(theme);

  // Global toggle function
  window.toggleSiteTheme = function() {
    var current = localStorage.getItem(key);
    var next = current === 'dark' ? 'light' : 'dark';
    localStorage.setItem(key, next);
    applyTheme(next);
  };

  // Re-apply after DOM fully loaded
  document.addEventListener('DOMContentLoaded', function() {
    var t = localStorage.getItem(key);
    if (t) applyTheme(t);
  });
})();
</script>

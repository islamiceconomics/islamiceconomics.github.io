/* ============================================================================
   CUSTOM OVERRIDES
   Styles that must override Quarto defaults (pure CSS, no SCSS needed)
   ============================================================================ */

/* Hide Quarto's default navbar — we inject the main site nav instead */
.navbar.navbar-expand-lg {
  display: none !important;
}

/* Site navbar integration — ensure it shows above Quarto content */
#site-navbar-inject {
  position: sticky;
  top: 0;
  z-index: 1050;
}

/* Footer integration */
#site-footer-inject {
  margin-top: 3rem;
}

/* Smooth transitions for theme switching */
body, .sidebar, #quarto-content {
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* ============================================================================
   SIDEBAR — ALWAYS VISIBLE, docked on left
   Override Quarto's Bootstrap offcanvas collapse behavior
   ============================================================================ */

/* Force the sidebar container to always be visible as a fixed left column */
#quarto-sidebar,
#quarto-sidebar.offcanvas-start,
#quarto-sidebar.offcanvas,
#quarto-sidebar.collapse,
#quarto-sidebar.collapsing {
  display: flex !important;
  flex-direction: column !important;
  visibility: visible !important;
  opacity: 1 !important;
  transform: none !important;
  position: fixed !important;
  top: 56px !important;
  left: 0 !important;
  bottom: 0 !important;
  width: 280px !important;
  z-index: 1040 !important;
  overflow-y: auto !important;
  background: #f7f5f1 !important;
  border-right: 1px solid #e5e0d8 !important;
  padding: 1rem 0.75rem !important;
}

/* Remove offcanvas backdrop that Quarto might add */
.offcanvas-backdrop {
  display: none !important;
}

/* Push the main content to the right to make room for sidebar */
#quarto-content {
  margin-left: 280px !important;
}

/* Push the site navbar inject full width but above sidebar */
#site-navbar-inject {
  z-index: 1050 !important;
  position: sticky !important;
  top: 0 !important;
}

/* Hide ALL sidebar toggle/hamburger buttons */
button.sidebar-toggle,
.sidebar-toggle,
#quarto-sidebar-toggle,
.hamburger,
.navbar-toggler,
[data-bs-toggle="offcanvas"],
button[aria-controls="quarto-sidebar"] {
  display: none !important;
}

/* Hide the offcanvas header/close button inside sidebar */
.offcanvas-header,
#quarto-sidebar .btn-close,
#quarto-sidebar .offcanvas-header {
  display: none !important;
}

/* ============================================================================
   SIDEBAR TEXT — Small, compact 13px font
   ============================================================================ */

/* Everything in sidebar: 13px */
#quarto-sidebar,
#quarto-sidebar *,
.sidebar-navigation,
.sidebar-navigation * {
  font-size: 13px !important;
  font-family: 'Inter', system-ui, -apple-system, sans-serif !important;
  line-height: 1.4 !important;
}

/* Book title at top — slightly larger */
#quarto-sidebar .sidebar-title,
.sidebar-title,
#quarto-sidebar .sidebar-logo + div,
#quarto-sidebar h1,
#quarto-sidebar h2 {
  font-size: 15px !important;
  font-weight: 700 !important;
}

/* Part headings (Part I, Part II) — smaller, muted, uppercase */
#quarto-sidebar .sidebar-item-section > .sidebar-item-toggle,
#quarto-sidebar .sidebar-item-section > .sidebar-item-toggle *,
#quarto-sidebar .sidebar-item-section > button,
#quarto-sidebar .sidebar-item-section > button * {
  font-size: 11px !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
  color: #888880 !important;
}

/* Chapter links */
#quarto-sidebar .sidebar-item a,
#quarto-sidebar .sidebar-item a *,
#quarto-sidebar li a,
#quarto-sidebar li a * {
  font-size: 13px !important;
  font-weight: 400 !important;
  text-transform: none !important;
  letter-spacing: normal !important;
  color: #333 !important;
}

/* Active chapter — green */
#quarto-sidebar a.active,
#quarto-sidebar a.active *,
#quarto-sidebar .active a,
#quarto-sidebar .active a * {
  color: #1a5c3a !important;
  font-weight: 600 !important;
}

/* Tight spacing */
#quarto-sidebar li,
#quarto-sidebar .sidebar-item {
  padding-top: 1px !important;
  padding-bottom: 1px !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* Part section spacing */
#quarto-sidebar .sidebar-item-section {
  margin-top: 0.6rem !important;
  margin-bottom: 0.2rem !important;
}

/* ============================================================================
   HIDE UNWANTED QUARTO UI
   ============================================================================ */

/* Remove code tools button */
#quarto-code-tools-menu,
#quarto-code-tools-source,
.code-tools-button {
  display: none !important;
}

/* Hide reader mode toggle */
#quarto-reader-toggle {
  display: none !important;
}

/* ============================================================================
   RESPONSIVE — Keep sidebar on desktop, allow collapse on mobile
   ============================================================================ */
@media (max-width: 768px) {
  #quarto-sidebar,
  #quarto-sidebar.offcanvas-start,
  #quarto-sidebar.offcanvas {
    position: fixed !important;
    transform: translateX(-100%) !important;
    width: 260px !important;
  }

  #quarto-sidebar.show {
    transform: translateX(0) !important;
  }

  #quarto-content {
    margin-left: 0 !important;
  }

  /* Show hamburger on mobile only */
  button.sidebar-toggle,
  .sidebar-toggle,
  button[aria-controls="quarto-sidebar"] {
    display: block !important;
  }
}

/* ============================================================================
   CUSTOM OVERRIDES — Book styling
   ============================================================================ */

/* Footer integration */
#site-footer-inject {
  margin-top: 3rem;
}

/* Remove code tools and reader mode buttons */
.code-tools-button,
#quarto-reader-toggle {
  display: none !important;
}

/* ============================================================================
   BOOK LAYOUT FIX — Force correct three-column layout
   Quarto books with docked sidebar + TOC use a CSS grid.
   These rules ensure: left sidebar | main content | right TOC
   ============================================================================ */

@media (min-width: 992px) {

  /* Remove the backdrop that appears with offcanvas */
  .offcanvas-backdrop {
    display: none !important;
  }

  /* Hide the sidebar toggle button since sidebar is docked */
  .navbar-toggler[data-bs-target="#quarto-sidebar"],
  [data-bs-toggle="offcanvas"][data-bs-target="#quarto-sidebar"] {
    display: none !important;
  }

  /* ---- LEFT SIDEBAR (book chapter navigation) ---- */
  #quarto-sidebar {
    position: fixed !important;
    top: 0;
    left: 0;
    bottom: 0;
    width: 250px !important;
    overflow-y: auto;
    z-index: 100;
    border-right: 1px solid #e5e0d8 !important;
    background-color: #f7f5f1 !important;
    padding-top: 60px; /* space for navbar */
  }

  /* ---- MAIN CONTENT AREA ---- */
  #quarto-content {
    margin-left: 250px !important;
    display: block !important;
    max-width: calc(100vw - 250px);
  }

  /* ---- RIGHT MARGIN SIDEBAR (on-page TOC) ---- */
  #quarto-margin-sidebar {
    position: fixed !important;
    top: 60px;
    right: 0;
    width: 200px !important;
    max-height: calc(100vh - 80px);
    overflow-y: auto;
    padding: 1rem 0.75rem;
    z-index: 99;
  }

  /* ---- MAIN CONTENT ---- */
  main.content,
  #quarto-document-content {
    max-width: calc(100vw - 250px - 200px - 4rem) !important;
    margin: 0 auto;
    padding: 1.5rem 2rem;
    padding-right: 220px; /* space for right TOC */
  }
}

/* ============================================================================
   MOBILE: Stack everything vertically
   ============================================================================ */

@media (max-width: 991px) {
  #quarto-sidebar {
    position: relative !important;
    width: 100% !important;
  }

  #quarto-content {
    margin-left: 0 !important;
  }

  #quarto-margin-sidebar {
    position: relative !important;
    width: 100% !important;
  }

  main.content,
  #quarto-document-content {
    max-width: 100% !important;
    padding: 1rem !important;
  }
}

/* ============================================================================
   SIDEBAR APPEARANCE
   ============================================================================ */

/* Sidebar background color */
#quarto-sidebar {
  background-color: #f7f5f1 !important;
  border-right: 1px solid #e5e0d8 !important;
}

/* ============================================================================
   SIDEBAR FONT SIZES — compact chapter listing
   ============================================================================ */

#quarto-sidebar .sidebar-item-text {
  font-size: 13px !important;
  line-height: 1.5 !important;
}

/* Part headings (Part I, Part II, etc.) */
#quarto-sidebar .sidebar-item-section > .sidebar-item-toggle .sidebar-item-text {
  font-size: 11px !important;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  font-weight: 600;
  color: #888880;
}

/* Sidebar title */
#quarto-sidebar .sidebar-title {
  font-size: 14px !important;
  font-weight: 700;
  color: #1a5c3a;
}
